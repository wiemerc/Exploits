#define SECURITY_WIN32
#include <windows.h>
#include <sspi.h>
#include <stdio.h>

int main()
{
    CredHandle cred_handle;
    TimeStamp tstamp;
    SECURITY_STATUS status;

    if ((status = AcquireCredentialsHandle(
        "",
        "Negotiate",
        SECPKG_CRED_INBOUND,
        NULL,
        NULL,
        NULL,
        NULL,
        &cred_handle,
        &tstamp
    )) == SEC_E_OK) {
        printf("AcquireCredentialsHandle() succeeded\n");
        FreeCredentialsHandle(&cred_handle);
        return 0;
    }
    else {
        printf("AcquireCredentialsHandle() failed with error code 0x%08x\n", status);
        return 1;
    }
}